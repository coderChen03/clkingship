"use strict";(self.webpackChunkclkingship=self.webpackChunkclkingship||[]).push([[397],{"./src/components/AutoComplete/autoComplete.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AjaxComplete:()=>AjaxComplete,CustomComplete:()=>CustomComplete,SimpleComplete:()=>SimpleComplete,__namedExportsOrder:()=>__namedExportsOrder,default:()=>autoComplete_stories});var v4=__webpack_require__("./node_modules/@storybook/addon-actions/node_modules/uuid/dist/esm-browser/v4.js"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_=__webpack_require__("@storybook/core-events/preview-errors"),ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a};function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!window?.FEATURES?.disallowImplicitActionsInRenderV8,error=new external_STORYBOOK_MODULE_CORE_EVENTS_PREVIEW_ERRORS_.ImplicitActionsDuringRendering({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler.implicit=options.implicit,handler}var react=__webpack_require__("../../clkingtest/node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),input=__webpack_require__("./src/components/Input/input.tsx"),icon=__webpack_require__("./src/components/Icon/icon.tsx"),transition=__webpack_require__("./src/components/Transition/transition.tsx");const hooks_useDebounce=function(value){let delay=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;const[debounceValue,setDebounceValue]=(0,react.useState)(value);return(0,react.useEffect)((()=>{const timer=window.setTimeout((()=>{setDebounceValue(value)}),delay);return()=>{clearTimeout(timer)}}),[value,delay]),debounceValue};var useClickOutside=__webpack_require__("./src/hooks/useClickOutside.tsx"),jsx_runtime=__webpack_require__("../../clkingtest/node_modules/react/jsx-runtime.js");const AutoComplete=props=>{const{fetchSuggestions,onSelect,renderOption,value,...restProps}=props,[inputValue,setInputValue]=(0,react.useState)(value),[suggestions,setSuggestions]=(0,react.useState)([]),[loading,setLoading]=(0,react.useState)(!1),[showDropdown,setShowDropdown]=(0,react.useState)(!1),triggerSearch=(0,react.useRef)(!0),componentRef=(0,react.useRef)(null),[highLightIndex,setHighLightIndex]=(0,react.useState)(-1);let debounceValue=hooks_useDebounce(inputValue,300);(0,useClickOutside.A)(componentRef,(()=>{setSuggestions([]),setShowDropdown(!1)})),(0,react.useEffect)((()=>{if(debounceValue&&triggerSearch.current){setLoading(!0);const results=fetchSuggestions(debounceValue);results instanceof Promise?results.then((res=>{setSuggestions(res),setLoading(!1),res.length>0&&setShowDropdown(!0)})):(setSuggestions(results),setLoading(!1),results.length>0&&setShowDropdown(!0)),setHighLightIndex(-1)}else setSuggestions([]),setShowDropdown(!1)}),[debounceValue,fetchSuggestions]);const customRender=item=>renderOption?renderOption(item):item.value,handleSelect=item=>{setInputValue(item.value),setSuggestions([]),onSelect&&onSelect(item),triggerSearch.current=!1},handleUpWithDown=index=>{index<=0?setHighLightIndex(0):index>=suggestions.length?setHighLightIndex(suggestions.length-1):setHighLightIndex(index)};return(0,jsx_runtime.jsxs)("div",{className:"clking-auto-complete",ref:componentRef,children:[(0,jsx_runtime.jsx)(input.p,{value:inputValue,onKeyDown:e=>{switch(e.key){case"ArrowUp":handleUpWithDown(highLightIndex-1);break;case"ArrowDown":handleUpWithDown(highLightIndex+1);break;case"Escape":setSuggestions([]);break;case"Enter":suggestions[highLightIndex]&&handleSelect(suggestions[highLightIndex])}},onChange:e=>{const value=e.target.value.trim();setInputValue(value),triggerSearch.current=!0},...restProps}),(0,jsx_runtime.jsx)(transition.A,{in:showDropdown||loading,animation:"zoom-in-top",timeout:300,onExited:()=>{setSuggestions([])},children:(0,jsx_runtime.jsxs)("ul",{className:"clking-suggestion-list",children:[loading&&(0,jsx_runtime.jsx)("div",{className:"suggstions-loading-icon",children:(0,jsx_runtime.jsx)(icon.A,{icon:"spinner",spin:!0})}),suggestions.map(((item,index)=>(0,jsx_runtime.jsx)("li",{className:classnames_default()("suggestion-item",{"is-active":index===highLightIndex}),onClick:()=>{handleSelect(item)},children:customRender(item)},index)))]})})]})};AutoComplete.__docgenInfo={description:"输入框自动完成功能。当输入值需要自动完成时使用，支持同步和异步两种方式\r\n支持 Input 组件的所有属性 支持键盘事件选择\r\n### 引用方法\r\n\r\n~~~js\r\nimport { AutoComplete } from 'clkingship'\r\n~~~",methods:[],displayName:"AutoComplete",props:{fetchSuggestions:{required:!0,tsType:{name:"signature",type:"function",raw:"(keyword: string) => DataSourceType[] | Promise<DataSourceType[]>",signature:{arguments:[{type:{name:"string"},name:"keyword"}],return:{name:"union",raw:"DataSourceType[] | Promise<DataSourceType[]>",elements:[{name:"Array",elements:[{name:"intersection",raw:"T & DataSourceObject",elements:[{name:"T"},{name:"DataSourceObject"}]}],raw:"DataSourceType[]"},{name:"Promise",elements:[{name:"Array",elements:[{name:"intersection",raw:"T & DataSourceObject",elements:[{name:"T"},{name:"DataSourceObject"}]}],raw:"DataSourceType[]"}],raw:"Promise<DataSourceType[]>"}]}}},description:"返回输入建议的方法，可以拿到当前的输入，然后返回同步的数组或者是异步的 Promise"},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: DataSourceType) => void",signature:{arguments:[{type:{name:"intersection",raw:"T & DataSourceObject",elements:[{name:"T"},{name:"DataSourceObject"}]},name:"item"}],return:{name:"void"}}},description:"点击选中建议项时触发的回调"},renderOption:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: DataSourceType) => ReactElement",signature:{arguments:[{type:{name:"intersection",raw:"T & DataSourceObject",elements:[{name:"T"},{name:"DataSourceObject"}]},name:"item"}],return:{name:"ReactElement"}}},description:"支持自定义渲染下拉项，返回 ReactElement"}},composes:["Omit"]};const autoComplete_stories={title:"AutoComplete 自动完成",component:AutoComplete,tags:["autodocs"]},SimpleComplete=()=>{const lakers=["Elvin Hayes","Julius Erving","LeBron James","Kareem Abdul-Jabbar","Rick Barry","Karl Malone","Wilt Chamberlain","George Gervin","Kevin Durant","Carmelo Anthony","Bob McAdoo","Dan Issel"];return(0,jsx_runtime.jsx)(AutoComplete,{fetchSuggestions:query=>lakers.filter((item=>item.includes(query))).map((name=>({value:name}))),onSelect:action("selected"),placeholder:"输入湖人队球员英文名试试"})};SimpleComplete.storyName="简单的自动完成";const CustomComplete=()=>{const lakersWithNumber=[{value:"bradley",number:11},{value:"pope",number:1},{value:"caruso",number:4},{value:"cook",number:2},{value:"cousins",number:15},{value:"james",number:23},{value:"AD",number:3},{value:"green",number:14},{value:"howard",number:39},{value:"kuzma",number:0}];return(0,jsx_runtime.jsx)(AutoComplete,{fetchSuggestions:query=>lakersWithNumber.filter((item=>item.value.includes(query))),onSelect:action("selected"),renderOption:item=>{const itemWithNumber=item;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("h5",{children:["球星:",itemWithNumber.value]}),(0,jsx_runtime.jsxs)("p",{children:["球衣号码",itemWithNumber.number]})]})},placeholder:"请输入"})};CustomComplete.storyName="支持自定义模版的自动完成";const AjaxComplete=()=>(0,jsx_runtime.jsx)(AutoComplete,{fetchSuggestions:query=>fetch("https://api.github.com/search/users?q=".concat(query)).then((res=>res.json())).then((_ref=>{let{items}=_ref;return items.slice(0,10).map((item=>({value:item.login,...item})))})),renderOption:item=>{const itemWithNumber=item;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("h5",{children:["搜索内容:",itemWithNumber.value]}),(0,jsx_runtime.jsxs)("p",{children:["搜索地址",itemWithNumber.url]})]})},onSelect:action("selected"),placeholder:"输入搜索内容试试"});AjaxComplete.storyName="支持异步搜索的自动完成",SimpleComplete.parameters={...SimpleComplete.parameters,docs:{...SimpleComplete.parameters?.docs,source:{originalSource:'() => {\n  const lakers = ["Elvin Hayes", "Julius Erving", "LeBron James", "Kareem Abdul-Jabbar", "Rick Barry", "Karl Malone", "Wilt Chamberlain", "George Gervin", "Kevin Durant", "Carmelo Anthony", "Bob McAdoo", "Dan Issel"];\n  const handleFetch = (query: string) => {\n    return lakers.filter(item => item.includes(query)).map(name => ({\n      value: name\n    }));\n  };\n  return <AutoComplete fetchSuggestions={handleFetch} onSelect={action("selected")} placeholder="输入湖人队球员英文名试试"></AutoComplete>;\n}',...SimpleComplete.parameters?.docs?.source},description:{story:"简单的自动完成",...SimpleComplete.parameters?.docs?.description}}},CustomComplete.parameters={...CustomComplete.parameters,docs:{...CustomComplete.parameters?.docs,source:{originalSource:'() => {\n  // 定义类型\n  interface LakerPlayerProps {\n    value: string;\n    number: number;\n  }\n  const lakersWithNumber = [{\n    value: "bradley",\n    number: 11\n  }, {\n    value: "pope",\n    number: 1\n  }, {\n    value: "caruso",\n    number: 4\n  }, {\n    value: "cook",\n    number: 2\n  }, {\n    value: "cousins",\n    number: 15\n  }, {\n    value: "james",\n    number: 23\n  }, {\n    value: "AD",\n    number: 3\n  }, {\n    value: "green",\n    number: 14\n  }, {\n    value: "howard",\n    number: 39\n  }, {\n    value: "kuzma",\n    number: 0\n  }];\n  const handleFetch = (query: string) => {\n    return lakersWithNumber.filter(item => item.value.includes(query));\n  };\n  const handleRender = (item: DataSourceType) => {\n    const itemWithNumber = (item as DataSourceType<LakerPlayerProps>);\n    return <>\r\n        <h5>球星:{itemWithNumber.value}</h5>\r\n        <p>球衣号码{itemWithNumber.number}</p>\r\n      </>;\n  };\n  return <AutoComplete fetchSuggestions={handleFetch} onSelect={action("selected")} renderOption={handleRender} placeholder="请输入"></AutoComplete>;\n}',...CustomComplete.parameters?.docs?.source},description:{story:"支持自定义模版的自动完成",...CustomComplete.parameters?.docs?.description}}},AjaxComplete.parameters={...AjaxComplete.parameters,docs:{...AjaxComplete.parameters?.docs,source:{originalSource:'() => {\n  // 处理异步请求\n  const handleFetch = (query: string) => {\n    return fetch(`https://api.github.com/search/users?q=${query}`).then(res => {\n      return res.json();\n    }).then(({\n      items\n    }) => {\n      return items.slice(0, 10).map((item: any) => ({\n        value: item.login,\n        ...item\n      }));\n    });\n  };\n  const handleRender = (item: DataSourceType) => {\n    type DataSourceType = {\n      value: string;\n      url: string;\n    };\n    const itemWithNumber = (item as DataSourceType);\n    return <>\r\n        <h5>搜索内容:{itemWithNumber.value}</h5>\r\n        <p>搜索地址{itemWithNumber.url}</p>\r\n      </>;\n  };\n  return <AutoComplete fetchSuggestions={handleFetch} renderOption={handleRender} onSelect={action("selected")} placeholder="输入搜索内容试试"></AutoComplete>;\n}',...AjaxComplete.parameters?.docs?.source},description:{story:"支持异步搜索的自动完成",...AjaxComplete.parameters?.docs?.description}}};const __namedExportsOrder=["SimpleComplete","CustomComplete","AjaxComplete"]},"./src/components/Icon/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("../../clkingtest/node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js"),_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@fortawesome/fontawesome-svg-core/index.mjs"),_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@fortawesome/free-solid-svg-icons/index.mjs"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../clkingtest/node_modules/react/jsx-runtime.js");_fortawesome_fontawesome_svg_core__WEBPACK_IMPORTED_MODULE_3__.Yv.add(_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_5__.X7I);const Icon=props=>{const{className,theme,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("clking-icon",className,{["icon-".concat(theme)]:theme});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_2__.g,{className:classes,...restProps})},__WEBPACK_DEFAULT_EXPORT__=Icon;Icon.__docgenInfo={description:"",methods:[],displayName:"Icon",props:{theme:{required:!1,tsType:{name:"union",raw:'"primary" | "secondary" | "success" | "info" | "warning" | "danger" | "light" | "dark"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'},{name:"literal",value:'"success"'},{name:"literal",value:'"info"'},{name:"literal",value:'"warning"'},{name:"literal",value:'"danger"'},{name:"literal",value:'"light"'},{name:"literal",value:'"dark"'}]},description:""}},composes:["FontAwesomeIconProps"]}},"./src/components/Input/input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,p:()=>Input});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../clkingtest/node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_Icon_icon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Icon/icon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../clkingtest/node_modules/react/jsx-runtime.js");const Input=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(((props,ref)=>{const{disabled,size,icon,prepend,append,style,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_1___default()("clking-input-wrapper",{["input-size-".concat(size)]:size,"is-disabled":disabled,"input-group":prepend||append,"input-group-append":!!append,"input-group-prepend":!!prepend});var value;return"value"in props&&(delete restProps.defaultValue,restProps.value=null==(value=props.value)?"":value),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:classes,style,children:[prepend&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"clking-input-group-prepend",children:prepend}),icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"icon-wrapper",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Icon_icon__WEBPACK_IMPORTED_MODULE_3__.A,{icon,title:"title-".concat(icon)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{ref,className:"clking-input-inner",disabled,...restProps}),append&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"clking-input-group-append",children:append})]})})),__WEBPACK_DEFAULT_EXPORT__=Input;Input.__docgenInfo={description:"Input 输入框 通过鼠标或键盘输入内容，是最基础的表单域的包装。\r\n\r\n~~~js\r\n// 这样引用\r\nimport { Input } from 'clkingship'\r\n~~~\r\n\r\n支持 HTMLInput 的所有基本属性",methods:[],displayName:"Input",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""},size:{required:!1,tsType:{name:"union",raw:'"lg" | "sm"',elements:[{name:"literal",value:'"lg"'},{name:"literal",value:'"sm"'}]},description:"尺寸大小"},icon:{required:!1,tsType:{name:"IconProp"},description:"icon图标"},prepend:{required:!1,tsType:{name:"union",raw:"string | ReactElement",elements:[{name:"string"},{name:"ReactElement"}]},description:"前缀"},append:{required:!1,tsType:{name:"union",raw:"string | ReactElement",elements:[{name:"string"},{name:"ReactElement"}]},description:"后缀"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ChangeEvent",elements:[{name:"HTMLInputElement"}],raw:"ChangeEvent<HTMLInputElement>"},name:"e"}],return:{name:"void"}}},description:""},ref:{required:!1,tsType:{name:"any"},description:""}},composes:["Omit"]}},"./src/components/Transition/transition.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../clkingtest/node_modules/react/index.js"),react_transition_group__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-transition-group/esm/CSSTransition.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../clkingtest/node_modules/react/jsx-runtime.js");const Transition=props=>{const{animation,classNames,children,...restprops}=props;let nodeRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_transition_group__WEBPACK_IMPORTED_MODULE_2__.A,{nodeRef,classNames:classNames||animation,...restprops,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"csstransition",ref:nodeRef,children})})};Transition.defaultProps={unmountOnExit:!0,appear:!0};const __WEBPACK_DEFAULT_EXPORT__=Transition;Transition.__docgenInfo={description:"",methods:[],displayName:"Transition",props:{animation:{required:!1,tsType:{name:"union",raw:'"zoom-in-top" | "zoom-in-left" | "zoom-in-right" | "zoom-in-bottom"',elements:[{name:"literal",value:'"zoom-in-top"'},{name:"literal",value:'"zoom-in-left"'},{name:"literal",value:'"zoom-in-right"'},{name:"literal",value:'"zoom-in-bottom"'}]},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},unmountOnExit:{defaultValue:{value:"true",computed:!1},required:!1},appear:{defaultValue:{value:"true",computed:!1},required:!1}}}},"./src/hooks/useClickOutside.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../clkingtest/node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=function useClickOutside(ref,handler){(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const listener=event=>{ref.current&&!ref.current.contains(event.target)&&handler(event)};return document.addEventListener("click",listener),()=>{document.removeEventListener("click",listener)}}),[ref,handler])}}}]);